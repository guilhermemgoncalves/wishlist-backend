# Backend da Wishlist

<p align="center">
  <img src="assets/OIP.webp" alt="Wishlist" />
</p>

## Vis√£o Geral

O **Wishlist Backend** √© um servi√ßo dedicado √† gest√£o de listas de desejos, permitindo que usu√°rios consultem, adicionem ou removam itens de suas listas. Ele foi desenvolvido para integra√ß√£o direta com uma camada BFF (Backend for Frontend), garantindo entrega otimizada de dados para aplica√ß√µes frontend.

---

## Funcionalidades

- **Gerenciamento de Wishlist**: criar, excluir e listar itens na lista de desejos.
- **Integra√ß√£o com BFF**: entrega de dados otimizada para aplica√ß√µes frontend.

---

## Tecnologias Utilizadas

- **Framework Backend**: Node.js com NestJS
- **Banco de Dados**: MongoDB
- **API**: RESTful
- **Integra√ß√£o**: Comunica√ß√£o direta com a camada BFF

---

## Como Iniciar o Projeto

A aplica√ß√£o utiliza um arquivo `docker-compose.yml` para subir os servi√ßos necess√°rios (NestJS + MongoDB). Execute os seguintes comandos no terminal para iniciar o ambiente:

```bash
docker-compose down
docker-compose build
docker-compose up -d
```

 
## Integra√ß√£o com o BFF

O Wishlist Backend foi projetado para funcionar em conjunto com um BFF (Backend for Frontend), que atua como intermedi√°rio entre o frontend e os servi√ßos backend. Essa arquitetura permite adaptar a entrega de dados √†s necessidades da interface, garantindo melhor desempenho e organiza√ß√£o.

## Implementa√ß√£o

A estrutura da aplica√ß√£o segue boas pr√°ticas modernas:

- **Inje√ß√£o de Depend√™ncia (DI)**: gerenciamento de servi√ßos desacoplado.
- **DTOs (Data Transfer Objects)**: estrutura√ß√£o e valida√ß√£o de dados.
- **Pipes**: transforma√ß√£o e valida√ß√£o das entradas.
- **Guards**: controle de acesso aos endpoints.
- **Autentica√ß√£o com JWT**: prote√ß√£o de rotas por meio de tokens.
- **Swagger**: documenta√ß√£o autom√°tica da API.
- **json-server**: simula√ß√£o de APIs externas em ambiente de testes.


Para mocks de chamadas http foi utilizado o json-server, que simula o comportamento do backend para as entidades n√£o gerenciadas

## Como utilizar
A documenta√ß√£o Swagger est√° dispon√≠vel em (Ap√≥s iniciar o docker): `http://localhost:3002/swagger-ui`

## API Endpoints
Para reproduzir o uso da aplica√ß√£o √© necess√°rio os seguintes passos:

## Autentica√ß√£o via Swagger

### 1. Obter token
Execute o endpoint:
Endpoint exemplo: `GET http://localhost:3002/authentication/get-token`
![img.png](assets/img.png)
Clique em **"Execute"** e copie o token gerado.


### 2. Autorizar o token
Clique no bot√£o **"Authorize"** no topo da interface Swagger.

![img_1.png](assets/img_1.png)


Cole o token e confirme. Agora todos os endpoints estar√£o autenticados e prontos para uso.

![img_2.png](assets/img_2.png)

## Endpoints Dispon√≠veis

- `GET /wishlist/items`: retorna a wishlist do usu√°rio autenticado.
- `POST /wishlist/items`: adiciona um item √† wishlist.
- `DELETE /wishlist/items/:id`: remove um item da wishlist.
- `GET /wishlist/items/:id`: verifica se um item est√° presente na wishlist.

## Preset de Dados para Testes

- Um usu√°rio com `userId: "2"` √© pr√©-configurado com uma wishlist de **19 itens**.
- Essa lista √© criada automaticamente sempre que o container √© iniciado.
- Os produtos v√°lidos t√™m IDs de `1` a `30`.
- Voc√™ pode adicionar ou remover itens da lista a qualquer momento.
- O token gerado na autentica√ß√£o √© do usu√°rio com `id: "2"`.


## Informa√ß√µes Adicionais

- Os endpoints funcionam de forma **independente**, n√£o exigem chamadas em ordem.
- Se um produto j√° est√° presente na wishlist, o backend **n√£o retorna erro**, apenas ajusta o **status code** adequadamente.
- Erros reais s√≥ ocorrem em casos de **falha externa**, como indisponibilidade de servi√ßos HTTP simulados.
.

## Pr√≥ximos Passos

- üîß **Padronizar mensagens de erro**: melhorar clareza e debuggabilidade.
- üß™ **Adicionar testes unit√°rios**: garantir estabilidade e qualidade do c√≥digo.
- üöÄ **Melhorar performance**: otimizar intera√ß√µes com o MongoDB.
- üß¨ **Avaliar uso de GraphQL**: fornecer queries mais flex√≠veis no futuro.
